>> nest new sleepr
    (select pnpm)

>> pnpm run start:dev

>> nest generate library common
>> nest generate module database -p common
>> nest generate module config -p common
>> nest g app reservations
>> nest g app auth
>> nest g app payments

========== DOCKER COMPOSE =============
.env
    MONGO_URI = 'mongodb://mongo:27017/sleepr'

>> docker compose up
>> docker compose down

========== GCP =============
https://cloud.google.com/sdk/docs/install

>> gcloud auth application-default login
>> gcloud config configurations create sleepr
>> gcloud config set project sleepr-430609
>> gcloud config get project
>> gcloud artifacts repositories list
>> gcloud auth configure-docker \
    asia-south1-docker.pkg.dev

>> docker build . -t auth -f apps/auth/Dockerfile
>> docker build . -t notifications -f apps/notifications/Dockerfile
>> docker build . -t payments -f apps/payments/Dockerfile
>> docker build . -t reservations -f apps/reservations/Dockerfile

>> docker tag reservations asia-south1-docker.pkg.dev/sleepr-430609/reservations/production
>> docker tag auth asia-south1-docker.pkg.dev/sleepr-430609/auth/production
>> docker tag notifications asia-south1-docker.pkg.dev/sleepr-430609/notifications/production
>> docker tag payments asia-south1-docker.pkg.dev/sleepr-430609/payments/production

>> docker image push asia-south1-docker.pkg.dev/sleepr-430609/reservations/production
>> docker image push asia-south1-docker.pkg.dev/sleepr-430609/auth/production
>> docker image push asia-south1-docker.pkg.dev/sleepr-430609/notifications/production
>> docker image push asia-south1-docker.pkg.dev/sleepr-430609/payments/production


========== K8s =============
>> brew install helm
>> cd k8s/
>> helm create sleepr
>> kubectl create deployment reservations --image=asia-south1-docker.pkg.dev/sleepr-430609/reservations/production --dry-run=client -o yaml > deployment.yaml
>> mv deployment.yaml sleepr/templates/reservations/deployment.yaml
>> cd sleepr/
>> helm install sleepr .
>> kubectl get pods
>> kubectl describe pods [pod id]
- create service-account
- create service-account json key
>> kubectl create secret docker-registry gcr-json-key --docker-server=asia-south1-docker.pkg.dev --docker-username=_json_key --docker-password="$(cat /Users/sumit/Downloads/sleepr-430609-7f10d7c2d7bb.json)" --docker-email=itissumitsingh@gmail.com
>> kubectl patch serviceaccounts default -p '{"imagePullSecrets": [{"name": "gcr-json-key"}]}'
>> kubectl rollout restart deployment reservations

- create all services deployment.yaml
>> cd k8s/sleepr/
>> helm upgrade sleepr .
>> kubectl get pods